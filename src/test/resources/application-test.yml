spring:
  main:
    allow-bean-definition-overriding: true
  liquibase:
    enabled: true
    change-log: classpath:db/migrations/changelog.sql
#  sql:
#    init:
#      schema-locations: classpath:schema.sql
#      mode: always
DATABASE_CATALOG: ${DATABASE_CATALOG}

# KEYCLOAK CONFIG
keycloak:
  realm: ${KEYCLOAK_REALM}
  domain: ${KEYCLOAK_DOMAIN}
  adminClientId: ${KEYCLOAK_ADMIN_CLIENT_ID}
  adminClientSecret: ${KEYCLOAK_ADMIN_CLIENT_SECRETE}
  scope: ${KEYCLOAK_ADMIN_SCOPE}
  grant_type: ${KEYCLOAK_ADMIN_GRANT_TYPE}
  client: ${KEYCLOAK_CLIENT_TYPE}
  urls:
    auth: ${KEYCLOAK_AUTH_URL}
  user_auth_type: ${KEYCLOAK_USER_AUTH_TYPE}
  password: ${KEYCLOAK_PASSWORD}
  username: ${KEYCLOAK_USERNAME}

#Roles
default_roles:
  users: ${DEFAULT_USERS_ROLES}
  admin: ${DEFAULT_ADMIN_ROLES}

# Logging
logging:
  level:
    org:
      testcontainers: TRACE
    root: TRACE

# Kafka
kafka:
  common-config:
    security:
      type: "NONE"
  producer-config:
    retries: 2
    request-timeout-ms: 6000
    deliver-time-out-ms: 36000
  consumer-config:
    none-retryable-exceptions:
      - capitec.branch.appointment.exeption.MailSenderException
      - org.eclipse.angus.mail.util.MailConnectException
      - org.eclipse.angus.mail.util.MailConnectException
      - org.apache.kafka.common.errors.TimeoutException
      - org.apache.kafka.common.errors.NotEnoughReplicasAfterAppendException
      - org.apache.kafka.common.errors.NotEnoughReplicasException
      - org.springframework.kafka.support.serializer.DeserializationException
      - jakarta.mail.MessagingException
    session-timeout-ms: 30000
    heartbeat-interval-ms: 10000
    group-id: default-test
    max-poll-interval-ms: 300000
    max-partition-fetch-bytes-default: 1048576
    poll-timeout-ms: 1000
    max-poll-records: 10
    auto-offset-reset: earliest
  event-publisher-default-impl:
    enabled: true
  retry-default-impl:
    enabled: false

otp:
  expire:
    datetime: 5

# SLOTS CONFIGS
branch-slot:
  branch-configs:
    default:
      WEEK_DAYS:
        slot-duration: ${WEEK_DAY_SLOT_DURATION:30M}
        staff-count: ${WEEK_DAY_STAFF_COUNT:5}
        utilization-factor: ${WEEK_DAY_UTILIZATION_FACTOR:0.5}
        open-time: ${WEEK_DAY_OPEN_TIME:08:30}
        closing-time: ${WEEK_DAY_CLOSING_TIME:17:30}
        slot-day-type: WEEK_DAYS
        max-booking-capacity: 2
      WEEKEND:
        slot-duration: ${WEEKEND_SLOT_DURATION:30M}
        staff-count: ${WEEKEND_STAFF_COUNT:3}
        utilization-factor: ${WEEKEND_UTILIZATION_FACTOR:0.25}
        open-time: ${WEEKEND_OPEN_TIME:09:00}
        closing-time: ${WEEKEND_CLOSING_TIME:15:00}
        slot-day-type: WEEKEND
        max-booking-capacity: 1
      HOLIDAY:
        slot-duration: ${HOLIDAY_SLOT_DURATION:30M}
        staff-count: ${HOLIDAY_STAFF_COUNT:3}
        utilization-factor: ${HOLIDAY_UTILIZATION_FACTOR:0.1}
        open-time: ${HOLIDAY_OPEN_TIME:09:00}
        closing-time: ${HOLIDAY_CLOSING_TIME:13:00}
        slot-day-type: HOLIDAY
        max-booking-capacity: 1
    BR001:
      WEEK_DAYS:
        slot-duration: ${WEEK_DAY_SLOT_DURATION:30M}
        staff-count: ${WEEK_DAY_STAFF_COUNT:5}
        utilization-factor: ${WEEK_DAY_UTILIZATION_FACTOR:0.5}
        open-time: ${WEEK_DAY_OPEN_TIME:08:30}
        closing-time: ${WEEK_DAY_CLOSING_TIME:17:30}
        slot-day-type: WEEK_DAYS
        max-booking-capacity: 2
      WEEKEND:
        slot-duration: ${WEEKEND_SLOT_DURATION:30M}
        staff-count: ${WEEKEND_STAFF_COUNT:3}
        utilization-factor: ${WEEKEND_UTILIZATION_FACTOR:0.25}
        open-time: ${WEEKEND_OPEN_TIME:09:00}
        closing-time: ${WEEKEND_CLOSING_TIME:15:00}
        slot-day-type: WEEKEND
        max-booking-capacity: 1
      HOLIDAY:
        slot-duration: ${HOLIDAY_SLOT_DURATION:30M}
        staff-count: ${HOLIDAY_STAFF_COUNT:3}
        utilization-factor: ${HOLIDAY_UTILIZATION_FACTOR:0.1}
        open-time: ${HOLIDAY_OPEN_TIME:09:00}
        closing-time: ${HOLIDAY_CLOSING_TIME:13:00}
        slot-day-type: HOLIDAY
        max-booking-capacity: 1
  branch-use-default-configs:
    - BR002


